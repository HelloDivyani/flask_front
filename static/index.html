<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://neo4j-contrib.github.io/developer-resources/language-guides/assets/css/main.css">
    <title>Twitter Time Based Influencer Analysis</title>



</head>

<body>
<div id="graph">
</div>
<div role="navigation" class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="row">
           
            <div class="navbar-header col-sm-6 col-md-6">
                <div class="logo-well">
                    <a href="http://neo4j.com/developer-resources">
                    <img src="http://neo4j-contrib.github.io/developer-resources/language-guides/assets/img/logo-white.svg" alt="Neo4j World's Leading Graph Database" id="logo">
                    </a>
                </div>
                <div class="navbar-brand">
                    <div class="brand" style="font-size:30px">Indian-Politics Influencer Analysis</div>
                </div>
            </div>
          
               


        </div>

         <div class="container">
       
                        <form class="navbar-form" id="search">

                        
                              <h5>Select Features : </h5>
                             
                              
                                <label class="checkbox-inline">
                                  <input type="checkbox" name="check" value="1">Top-Mentions
                                </label>
                                <label class="checkbox-inline">
                                  <input type="checkbox"  name="check" value="2">Max-Likes
                                </label>
                                <label class="checkbox-inline">
                                  <input type="checkbox" name="check" value="3">Max-Retweets
                                </label>
                              
                        </div>
                

                   
                          <h5> Select the Time Duration : </h5>
                      
                      
                            <label class="radio-inline">
                              <input type="radio" name="optradio" value="1">19-24 September'18
                            </label>
                            <label class="radio-inline">
                              <input type="radio" name="optradio" value="2">25-26 September'18
                            </label>
                            <label class="radio-inline">
                              <input type="radio" name="optradio" value="3">27-30 September'18
                            </label>
                              <label class="radio-inline">
                              <input type="radio" name="optradio" value="4">1-3 October'18
                            </label>
                              <label class="radio-inline">
                              <input type="radio" name="optradio" value="5">4-7 October'18
                            </label>
                              <label class="radio-inline">
                              <input type="radio" name="optradio" value="6">8-11 October'18
                            </label>
                              <label class="radio-inline">
                              <input type="radio" name="optradio" value="7" checked>OverAll
                            </label>
                        <br>
                         <h5> Select the Location : </h5>
                          <br>
                       
                              <select id="places" name="location"> 
                               <option value="All Over India">All Over India</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Mumbai">Mumbai</option>
                                <option value="Bengaluru">Bengaluru</option>
                                <option value="Patna">Patna</option>
                                <option value="Surat">Surat</option>
                             <option value="Kolkata">Kolkata</option>
                              <option value="Punjab">Punjab</option>
                               <option value="Guwahati">Guwahati</option>
                                <option value="Lucknow">Lucknow</option>
                                 <option value="Pune">Pune</option>
                                  <option value="Haridwar">Haridwar</option>
                                   <option value="Goa">Goa</option>
                                    <option value="Pakistan">Pakistan</option>
                                     <option value="Hyderabad">Hyderabad</option>
                                      <option value="Chennai">Chennai</option>
                                      <option value="Haryana">Haryana</option>
                                     

                              </select>
                            <button class="btn btn-default" style="text-align:center;margin-left:50px" id="search_button" type="submit">Search</button>
                        </form>
                  
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-5">
        <div class="panel panel-default">
            <div class="panel-heading">Influencer Rank List</div>
            <table id="results" class="table table-striped table-hover">
                <thead>
                <tr>
                    <th>Profile_Image</th>
                    <th>Name</th>
                    <th>Screen_Name</th>
                      <th>Location</th>
                    <th>Followers</th>
                    <th>Sentiment</th>
                    
                        
                       
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-md-7">
        <div class="panel panel-default">
            <div class="panel-heading" id="title">Details</div>
            <div class="row">
                <div class="col-sm-4 col-md-4">
                    <img src="" class="well" id="poster"/>
                </div>
                <div class="col-md-8 col-sm-8">
                    <h4>Crew</h4>
                    <ul id="crew">
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
<script type="text/javascript">
    $(function () {
        

        $('form').on('submit',function(event){
          search();
//          csvfileTest()
          event.preventDefault();
        });


   function showMovie(Screen_Name) {
          $.get("/info?q=" +Screen_Name ,
                    function (data) {
                        if (!data) return;
                       /* $("#title").text(data.title);
                        $("#poster").attr("src","http://neo4j-contrib.github.io/developer-resources/language-guides/assets/posters/"+encodeURIComponent(data.title)+".jpg");
                        var $list = $("#crew").empty();
                        data.cast.forEach(function (cast) {
                            $list.append($("<li>" + cast.name + " " +cast.job + (cast.job == "acted"?" as " + cast.role : "") + "</li>"));
                        });*/
                    }, "json");
                    alert("inside show movie");
                    alert(Screen_Name);
            return false;
        }

function standby() {
    document.getElementById('myImageId').src = 'https://www.google.com/images/srpr/logo11w.png';
}
     
      function search() {

        //alert('inside jquery search');  
          data1=$('form').serialize();
        // alert(data1);
          //alert(data1);
          //alert("form data fetched");
          $.get("/search?"+data1,
                    function (data) {
                      alert("Requesting Data .....");
            //         alert("here once");
                        var t = $("table#results tbody").empty();
                        if (!data || data.length == 0) return;
              //          alert("data is there");
                        data.forEach(function (movie) {
                  //          alert("loop");
                //          alert(movie.Name);
                            var pos=movie.positiveTweets+movie.VerypositiveTweets;
                            var neg=movie.negativeTweets+movie.VerynegativeTweets;
                            var neu=movie.neutralTweets;
                            var senti="";
                            if(pos>neu && pos>neg)
                            {
                              senti="Positive";
                            }
                            else if(neg>neu && neg>pos)
                            {
                              senti="Negative";
                            }
                            else
                            {
                              senti="Neutral";
                            }
                            $("<tr><td class='movie'> <img id='myImageId' onerror='standby()' src=" + movie.Image +"></td><td>" + movie.Name + "</td><td>" + movie.Screen_Name +  "</td><td>" + movie.Location + "</td><td>" + movie.Followers+ "</td><td>" + senti+"</td></tr>").appendTo(t)
                             .click(function(event) { showMovie(movie.Screen_Name);  
                              event.preventDefault(); })
                           // 
                           //alert("one data");        
                        });
                        //alert('get reuqest completed');
                       }, "json");
           // alert("Search Jquery finished");
     
            return false;

        }

  });




</script>


</body>
</html>