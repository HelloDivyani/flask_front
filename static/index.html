<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="http://neo4j-contrib.github.io/developer-resources/language-guides/assets/css/main.css">
    <title>Twitter Time Based Influencer Analysis</title>



</head>

<body>
<div id="graph">
</div>
<div role="navigation" class="navbar navbar-default navbar-static-top">
    <div class="container">
        <div class="row">
           
            <div class="navbar-header col-sm-6 col-md-6">
                <div class="logo-well">
                    <a href="http://neo4j.com/developer-resources">
                    <img src="http://neo4j-contrib.github.io/developer-resources/language-guides/assets/img/logo-white.svg" alt="Neo4j World's Leading Graph Database" id="logo">
                    </a>
                </div>
                <div class="navbar-brand">
                    <div class="brand" style="font-size:30px">Indian-Politics Influencer Analysis</div>
                </div>
            </div>
          
               


        </div>

         <div class="container">
       
                        <form class="navbar-form" id="search">

                        
                              <h5>Select Features : </h5>
                             
                              
                                <label class="checkbox-inline">
                                  <input type="checkbox" name="check" value="1">Top-Mentions
                                </label>
                                <label class="checkbox-inline">
                                  <input type="checkbox"  name="check" value="2">Max-Likes
                                </label>
                                <label class="checkbox-inline">
                                  <input type="checkbox" name="check" value="3">Max-Retweets
                                </label>
                              
                        </div>
                

                   
                          <h5> Select the Time Duration : </h5>
                      
                      
                            <label class="radio-inline">
                              <input type="radio" name="optradio" value="1">19-24 September'18
                            </label>
                            <label class="radio-inline">
                              <input type="radio" name="optradio" value="2">25-26 September'18
                            </label>
                            <label class="radio-inline">
                              <input type="radio" name="optradio" value="3">27-30 September'18
                            </label>
                              <label class="radio-inline">
                              <input type="radio" name="optradio" value="4">1-3 October'18
                            </label>
                              <label class="radio-inline">
                              <input type="radio" name="optradio" value="5">4-7 October'18
                            </label>
                              <label class="radio-inline">
                              <input type="radio" name="optradio" value="6">8-11 October'18
                            </label>
                            
                        <br>
                         <h5> Select the Location : </h5>
                          <br>
                       
                              <select id="places" name="location"> 
                               <option value="All Over India">All Over India</option>
                                <option value="Delhi">Delhi</option>
                                <option value="Mumbai">Mumbai</option>
                                <option value="Bengaluru">Bengaluru</option>
                                <option value="Patna">Patna</option>
                                <option value="Surat">Surat</option>
                             <option value="Kolkata">Kolkata</option>
                              <option value="Punjab">Punjab</option>
                               <option value="Guwahati">Guwahati</option>
                                <option value="Lucknow">Lucknow</option>
                                 <option value="Pune">Pune</option>
                                  <option value="Haridwar">Haridwar</option>
                                   <option value="Goa">Goa</option>
                                    <option value="Pakistan">Pakistan</option>
                                     <option value="Hyderabad">Hyderabad</option>
                                      <option value="Chennai">Chennai</option>
                                      <option value="Haryana">Haryana</option>
                                     

                              </select>
                            <button class="btn btn-default" style="text-align:center;margin-left:50px" id="search_button" type="submit">Search</button>
                        </form>
                  
        </div>
    </div>
</div>

<!-- 
<div style="float:right" class="row">
            <div class="col-sm-6 col-md-6">
                <ul class="nav navbar-nav">
                    <li>
                        <form class="navbar-form" action="/short" id="shortest">
                            <div class="form-group">
                                <input type="text" value="jayantsinha" placeholder="Enter Screen_Name" class="form-control" name="search">
                            </div>
                            <button class="btn btn-default" type="submit">Shortest Path</button>
                        </form>
                    </li>
                </ul>
            </div>
</div>
 -->

<div class="row" style="width:125%">
    <div class="col-md-5">
        <div class="panel panel-default">
            <div class="panel-heading">Influencer Rank List</div>
            <table id="results" class="table table-striped table-hover">
                <thead>
                <tr>
                  <th>Rank</th>
                    <th>Profile_Image</th>
                    <th>Name</th>
                    <th>Screen_Name</th>
                      <th>Location</th>
                    <th>Followers</th>
                    <th>Sentiment</th>
                    
                        
                       
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <div class="col-md-7">
        <div class="panel panel-default">
            <div class="panel-heading" id="title"></div>
            <div class="row">
                <div class="col-sm-4 col-md-4">
                    <img src="" class="well" id="poster"/>
                     <div style="float:right" class="col-md-8 col-sm-8">
                    <h4>User Details</h4>
                    <ul id="crew">
                    </ul><br>
                    </div>
                </div>
                <div style="margin-right:15px" class="col-md-8 col-sm-8">
                   <!--  <h4>User Details</h4>
                    <ul id="crew">
                    </ul><br> -->
                     <h4>Intermediate Users in Shortest Path</h4>
                    <form  class="navbar-form" id="special">
                            <div class="form-group">
                                <input type="text" value="jayantsinha" placeholder="Enter Screen_Name" class="form-control" name="shortPath">
                            </div>
                            <button class="btn btn-default" type="submit">Find Shortest Path</button>
                        </form>
                        <br>

                   
                    <table id="resultsShort" class="table table-striped table-hover">
                <thead>
                <tr>
                  <th>Serial</th>
                    <th>Profile_Image</th>
                    <th>Name</th>
                    <th>Screen_Name</th>
                      <th>Location</th>
                    <th>Followers</th>
             
                    
                        
                       
                </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

                </div>
            </div>
        </div>
    </div>
</div>



<script type="text/javascript" src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.71/jquery.csv-0.71.min.js"></script>
<script type="text/javascript">
    $(function () {
        

        $('form').on('submit',function(event){
          //  alert("Requesting Data .....");
          search();
//          csvfileTest()
          event.preventDefault();
        });


   function showMovie(user) {
  //  alert(user.Name);
  /*  alert("Positive"+parseInt(pos));
    alert("Negative"+parseInt(neg));
    alert("Neutral"+parseInt(neu));*/
         /* $.get("/info?q=" +Screen_Name ,
                    function (data) {
                        if (!data) return;
                       /* $("#title").text(data.title);
                        $("#poster").attr("src","http://neo4j-contrib.github.io/developer-resources/language-guides/assets/posters/"+encodeURIComponent(data.title)+".jpg");
                        var $list = $("#crew").empty();
                        data.cast.forEach(function (cast) {
                            $list.append($("<li>" + cast.name + " " +cast.job + (cast.job == "acted"?" as " + cast.role : "") + "</li>"));
                        });
                    }, "json");
                    alert("inside show movie");
                    alert(Screen_Name);**/
                   // alert(user.positiveTweets);

                   // $("#title").text(data.title);
                    $("#title").text("Name : "+user.Name);
                        $("#poster").attr("src",user.Image);

                        var positive;
                        var negative;
                        var neutral;
                       // data.cast.forEach(function (cast) {
                            positive=parseInt(user.positiveTweets)+parseInt(user.VerypositiveTweets);
                            negative=parseInt(user.negativeTweets)+parseInt(user.VerynegativeTweets);
                            neutral=parseInt(user.neutralTweets);
                               var $list = $("#crew").empty();
                            $list.append($("<li> Screen_Name : "+user.Screen_Name+"</li><li> Followers : "+user.Followers+"</li><li>Positive Tweets : " + positive + "</li><li> Negative Tweets : " +negative+"</li><li>Neutral Tweets :"+neutral+"</li><li>Location : "+user.Location+"</li>"));
                     // $("#display").text($("<ul><li> Positive Tweets : " + positive + "</li><li> Negative Tweets : " +negative+"</li><li>Neutral Tweets :"+neutral+"</li></ul>"));
                    //   alert(positive);
                      // alert(neutral);
                       //alert(negative);
                       //alert("")
                       // });
                      // $("#display").text("hehe");

                          $("body").scrollTop(0);
                           // $("#special").text("<input");


                    
           /*   $.get("/short",
                    function (data) {
                     // alert("plz");
                      
                        var t = $("table#resultsShort tbody").empty();
                      if (!data) return;
                      var i=1;
                      //  $("#title").text(data.title);
                       // $("#poster").attr("src","http://neo4j-contrib.github.io/developer-resources/language-guides/assets/posters/"+encodeURIComponent(data.title)+".jpg");
                       // var $list = $("#crew");
                        data.forEach(function (m) {


                             $("<tr><td class='movie'>"+i+"</td><td><img id='myImageId' onError='this.onerror=null;this.src='http://pbs.twimg.com/profile_images/897752027459080193/RfBvbxfl_normal.jpg'; src=" + m.Image +"></td><td>" + m.Name + "</td><td>" + m.Screen_Name +  "</td><td>" + m.Location + "</td><td>" + m.Followers+ "</td></tr>").appendTo(t)
                             .click(function(event) { // showMovie(movie);  
                             // event.preventDefault();
                              })
                         //    i=parseInt(i)+1;
                             i=i+1;



                          //alert(m.Screen_Name);
                            
                           // $list1.append($("<li>Name : " + m.Name + "</li>"));
                        });
                    }, "json");**/

                  $('#special').on('submit',function(event){
                          //  alert("Requesting Data .....");
                          //search();
                //          csvfileTest()
                fetchPath(user);
                          event.preventDefault();
                        });



            return false;
        }

        function fetchPath(user)
        {

           data1=$('#special').serialize();
          // alert(user.Screen_Name);
           //alert(data1);

              $.get("/short?name1="+user.Screen_Name+"&"+data1,
                    function (data) {
                     // alert("plz");
                      
                        var t = $("table#resultsShort tbody").empty();
                      if (!data) return;
                      var i=1;
                      //  $("#title").text(data.title);
                       // $("#poster").attr("src","http://neo4j-contrib.github.io/developer-resources/language-guides/assets/posters/"+encodeURIComponent(data.title)+".jpg");
                       // var $list = $("#crew");
                        data.forEach(function (m) {


                             $("<tr><td class='movie'>"+i+"</td><td><img id='myImageId' onError='this.onerror=null;this.src='http://pbs.twimg.com/profile_images/897752027459080193/RfBvbxfl_normal.jpg'; src=" + m.Image +"></td><td>" + m.Name + "</td><td>" + m.Screen_Name +  "</td><td>" + m.Location + "</td><td>" + m.Followers+ "</td></tr>").appendTo(t)
                             .click(function(event) { // showMovie(movie);  
                             // event.preventDefault();
                              })
                         //    i=parseInt(i)+1;
                             i=i+1;



                          //alert(m.Screen_Name);
                            
                           // $list1.append($("<li>Name : " + m.Name + "</li>"));
                        });
                    }, "json");

        }


function standby() {
    document.getElementById('myImageId').src = 'http://pbs.twimg.com/profile_images/897752027459080193/RfBvbxfl_normal.jpg';
}
     function imgError(image) {
      alert("IMage Error");
    image.onerror = "";
    image.src = "https://www.google.com/images/srpr/logo11w.png";
    return true;
}
      function search() {

        //alert('inside jquery search');  
          data1=$('form').serialize();
         


          $.get("/search?"+data1,
                    function (data) {
                         alert("Requesting Data .......");         
                         //system="";
            //         alert("here once");
                        var t = $("table#results tbody").empty();
                        if (!data || data.length == 0) return;
              //          alert("data is there");
                    var i=1;
                    var pos;
                    var neg;
                    var neu;
                    var senti="";
                        data.forEach(function (movie) {
                  //          alert("loop");
                              
                             pos=parseInt(movie.positiveTweets)+parseInt(movie.VerypositiveTweets);
                             neg=parseInt(movie.negativeTweets)+parseInt(movie.VerynegativeTweets);
                             neu=parseInt(movie.neutralTweets);
                            senti="";
                            if(pos>neu && pos>neg)
                            {
                              senti="Positive";
                            }
                            else if(neg>neu && neg>pos)
                            {
                              senti="Negative";
                            }
                            else
                            {
                              senti="Neutral";
                            }
                            //alert(pos);
                          //  alert(neg);
                            //alert(neu);
                       //    alert(movie.Name);
                     // alert(parseInt(pos));
                    // alert("here"+pos);

                           // system=system+movie.Image+","+movie.Screen_Name+","+movie.Location+","+movie.Followers+","+movie.Name+"/n";
                            $("<tr><td class='movie'>"+i+"</td><td><img id='myImageId' onError='this.onerror=null;this.src='http://pbs.twimg.com/profile_images/897752027459080193/RfBvbxfl_normal.jpg'; src=" + movie.Image +"></td><td>" + movie.Name + "</td><td>" + movie.Screen_Name +  "</td><td>" + movie.Location + "</td><td>" + movie.Followers+ "</td><td>" + senti+"</td></tr>").appendTo(t)
                             .click(function(event) {  showMovie(movie);  
                              event.preventDefault(); })
                         //    i=parseInt(i)+1;
                             i=i+1;
                           //  alert(i);
                        // alert(movie.Name);
                          

                           // 
                           //alert("one data");        
                        });

                        //alert('get reuqest completed');
                       }, "json");
           // alert("Search Jquery finished");
            
            return false;

        }


        $("#myImageId").preload({
          notFound:'http://pbs.twimg.com/profile_images/897752027459080193/RfBvbxfl_normal.jpg'
        });

  });




</script>


</body>
</html>